<div class="choice"
     [ngClass]="{noTitle: (get('Title') || '') == ''}"
     title="{{((get('Description') || '') == '' ? get('Title') : '')}}">

  <label *ngIf="get('TypeAsString') == 'Boolean'">
    <input style="width: auto; height: auto;"
           [disabled]="disabled"
           type="checkbox"
           [(ngModel)]="form[field]"
           [required]="required()"
           name="{{field}}_Y"
           (change)="change($event)">
    <span style="font-size: inherit;"
          title="{{((get('Description') || '') == '' ? '' : get('Title'))}}">{{get('Title')}}</span>
  </label>

  <span *ngIf="get('TypeAsString') != 'Boolean'"
        title="{{((get('Description') || '') == '' ? '' : get('Title'))}}">{{get('Title')}}</span>

  <i *ngIf="(get('Description') || '') != ''"
     (mouseenter)="showHideTooltip(true)"
     (mouseleave)="showHideTooltip(false)">(i)</i>
  <div class="ToolTip"
       [hidden]="!tooltip">{{get('Description')}}</div>
  <span *ngIf="get('Required')"
        class="Required">*</span>

  <div *ngIf="get('TypeAsString') == 'MultiChoice'">
    <input placeholder="Filter or search the {{(get('Title') != '' ? get('Title') : null) ?? friendlyName(get('InternalName'))}} below"
           *ngIf="!disabled"
           [(ngModel)]="filterMulti"><br>
    <select (mousedown)="false"
            (click)="change($event)"
            multiple="multiple"
            class="{{multiLargeorSmall()}}"
            [disabled]="disabled"
            [ngModel]="form[field].results"
            [required]="required()"
            name="{{field}}_S">
      <option *ngFor="let i of choices()"
              [value]="i">{{i}}</option>
    </select>
  </div>

  <div *ngIf="get('TypeAsString') == 'Choice' && get('Format') != 'RadioButtons'">
    <select [disabled]="disabled"
            (ngModelChange)="selChangeS($event)"
            [ngModel]="form[field]"
            [required]="required()"
            name="{{field}}_C"
            [style.width.%]="!inChoices() ? 50 : 100"
            *ngIf="!disabled || inChoices()">
      <option disabled
              selected
              hidden>Please select {{(get('Title') != '' ? get('Title') : null) ?? friendlyName(get('InternalName'))}}</option>
      <option *ngIf="select.none"
              [value]="null">{{select.none}}</option>
      <option *ngFor="let i of choices()"
              [value]="i">{{i}}</option>
      <option *ngIf="select.other || get('FillInChoice')"
              [value]="inChoices() ? 'Please select...' : form[field]">{{select.other || 'Other'}}, please specify...</option>
    </select>
    <input [disabled]="disabled"
           type="text"
           [(ngModel)]="form[field]"
           [required]="required()"
           name="{{field}}_CO"
           [style.width.%]="!disabled || inChoices() ? 50 : 100"
           maxlength="250"
           onclick="this.select();"
           (change)="change($event)"
           *ngIf="!inChoices()">
  </div>

  <div *ngIf="get('TypeAsString') == 'Choice' && get('Format') == 'RadioButtons'">
    <label *ngIf="select.none"
           class="radio">
      <input [value]="null"
             [disabled]="disabled"
             type="radio"
             [(ngModel)]="form[field]"
             [required]="required()"
             name="{{field}}_R"
             (change)="change($event)">
      {{select.none}}
    </label>
    <label *ngFor="let i of choices()"
           class="radio">
      <input [value]="i"
             [disabled]="disabled"
             type="radio"
             [(ngModel)]="form[field]"
             [required]="required()"
             name="{{field}}_R"
             (change)="change($event)">
      {{i}}
    </label>
  </div>

  <div *ngIf="get('TypeAsString') == 'Number' || get('TypeAsString') == 'Integer'">
    <input [disabled]="disabled"
           type="text"
           pattern="-{0,1}[0-9,]*\.{0,1}[0-9,]*"
           [ngModel]="niceNumber()"
           (ngModelChange)="numberSet($event)"
           [required]="required()"
           name="{{field}}_I"
           [min]="get('Min')"
           [max]="get('Max')"
           (change)="change($event)"
           placeholder="{{(get('Title') != '' ? get('Title') : null) ?? friendlyName(get('InternalName'))}}...">
  </div>

  <div *ngIf="get('TypeAsString') == 'DateTime' && get('DisplayFormat') != 1">
    <input [disabled]="disabled"
           type="date"
           [ngModel]="form[field] | date:'yyyy-MM-dd'"
           (ngModelChange)="form[field] = $event"
           [required]="required()"
           name="{{field}}_D"
           (change)="change($event)"
           [min]="get('Min')"
           [max]="get('Max')"
           placeholder="{{(get('Title') != '' ? get('Title') : null) ?? friendlyName(get('InternalName'))}}...">
  </div>

  <div *ngIf="get('TypeAsString') == 'DateTime' && get('DisplayFormat') == 1">
    <input [disabled]="disabled"
           type="datetime-local"
           [ngModel]="form[field] | date:'yyyy-MM-ddTHH:mm'"
           (ngModelChange)="form[field] = $event"
           [required]="required()"
           name="{{field}}_DT"
           (change)="change($event)"
           [min]="get('Min')"
           [max]="get('Max')"
           placeholder="{{(get('Title') != '' ? get('Title') : null) ?? friendlyName(get('InternalName'))}}...">
  </div>

  <div *ngIf="get('TypeAsString') == 'Text'">
    <input [disabled]="disabled"
           type="text"
           [pattern]="text.pattern || '.*'"
           [(ngModel)]="form[field]"
           [required]="required()"
           name="{{field}}_T"
           [maxlength]="get('MaxLength')"
           (change)="change($event)"
           (keyup)="onUpText($event.key)"
           (click)="onUpText(undefined)"
           placeholder="{{(get('Title') != '' ? get('Title') : null) ?? friendlyName(get('InternalName'))}}...">
    <div class="MaxLength"
         [hidden]="remaining() >= 5">Maximum {{remaining()}} characters remaining</div>

    <div style="position: relative; padding: 0;"
         [hidden]="disabled">
      <div class="AutoComplete"
           *ngIf="results.length > 0">
        <ul>
          <li *ngFor="let result of results; let i = index"
              (click)="selectedText(result)"
              [hidden]="result['hide']"
              [style]="(pos == i ? 'background-color: rgba(0, 0, 0, 0.04);' : '')">
            {{result[field]}}
          </li>
          <li style="text-align: right;"
              (click)="selectedText(null)">
            Cancel
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div *ngIf="!disabled && get('TypeAsString') == 'Note' && !get('RichText') && !get('AppendOnly')">
    <textarea [(ngModel)]="form[field]"
              [required]="required()"
              name="{{field}}_M"
              (change)="change($event)"
              [style]="(text.height ? 'height: '+text.height+'px' : '')"
              placeholder="{{(get('Title') != '' ? get('Title') : null) ?? friendlyName(get('InternalName'))}}..."></textarea>
    <div class="MaxLength"
         [hidden]="remaining() >= 15">Maximum {{remaining()}} characters remaining</div>
  </div>

  <div *ngIf="!disabled && get('TypeAsString') == 'Note' && !get('RichText') && get('AppendOnly')">
    <textarea [required]="required()"
              name="{{field}}_MA"
              (change)="change($event)"
              [style]="(text.height ? 'height: '+text.height+'px' : '')"
              placeholder="{{(get('Title') != '' ? get('Title') : null) ?? friendlyName(get('InternalName'))}}..."></textarea>
    <div class="MaxLength"
         [hidden]="remaining() >= 15">Maximum {{remaining()}} characters remaining</div>
  </div>

  <div *ngIf="disabled && get('TypeAsString') == 'Note' && !get('RichText')"
       style="max-height: 500px; overflow: auto;">{{form[field]}}</div>

  <div *ngIf="!disabled && get('TypeAsString') == 'Note' && get('RichText') && !get('AppendOnly')">
    <div class="NgxEditor__Wrapper">
      <ngx-editor-menu [editor]="editor"
                       [toolbar]="toolbar"></ngx-editor-menu>
      <ngx-editor [editor]="editor"
                  [(ngModel)]="form[field]"
                  placeholder="{{(get('Title') != '' ? get('Title') : null) ?? friendlyName(get('InternalName'))}}..."
                  (ngModelChange)="change($event)"
                  name="{{field}}_H"
                  [outputFormat]="'html'">
      </ngx-editor>
    </div>
    <div class="MaxLength"
         [hidden]="remaining() >= 15">Maximum {{remaining()}} characters remaining</div>
  </div>

  <div *ngIf="!disabled && get('TypeAsString') == 'Note' && get('RichText') && get('AppendOnly')">
    <div class="NgxEditor__Wrapper">
      <ngx-editor-menu [editor]="editor"
                       [toolbar]="toolbar"></ngx-editor-menu>
      <ngx-editor [editor]="editor"
                  [(ngModel)]="unused"
                  placeholder="{{(get('Title') != '' ? get('Title') : null) ?? friendlyName(get('InternalName'))}}..."
                  (ngModelChange)="change($event)"
                  name="{{field}}_HA"
                  [outputFormat]="'html'">
      </ngx-editor>
    </div>
    <div class="MaxLength"
         [hidden]="remaining() >= 15">Maximum {{remaining()}} characters remaining</div>
  </div>

  <div *ngIf="disabled && get('TypeAsString') == 'Note' && get('RichText')"
       style="max-height: 500px; overflow: auto;"
       [innerHTML]="form[field]"></div>

  <div *ngIf="get('TypeAsString') == 'URL'">
    <input [disabled]="disabled"
           [(ngModel)]="form[field].Url"
           [required]="required()"
           name="{{field}}_UU"
           placeholder="https://"
           pattern="^.+\:\/\/.+$|^mailto\:.+$"
           (change)="change($event)"
           style="width:50%">
    <input [disabled]="disabled"
           [(ngModel)]="form[field].Description"
           name="{{field}}_UD"
           maxlength="250"
           (change)="change($event)"
           style="width:50%">
  </div>

  <div *ngIf="get('TypeAsString') == 'Attachments' && !file.uploadonly"
       style="position: relative;overflow-x: auto;"
       (dragover)="over($event)"
       (dragleave)="leave($event)"
       (drop)="drop($event)"
       [ngClass]="{'FilesOver': filesOver}">

    <div *ngIf="attachments().length == 0"
         style="text-align: center">
      No attachments yet.
      <div *ngIf="!disabled">Click the button below or drag and drop files to add.</div>
    </div>

    <div *ngIf="hasChecked() && file.doctype">
      Update selected:
      <select (change)="setClasses($event)"
              name="{{field}}_Cat">
        <option disabled
                selected
                hidden>{{file.doctype}}</option>
        <option *ngFor="let v of file.doctypes"
                value="{{v}}">{{v}}</option>
      </select>
    </div>

    <table class="files"
           *ngIf="field == 'Attachments'"
           cellspacing="0">
      <tr>
        <th>File Name</th>
        <th style="width: 0;"></th>
      </tr>
      <tr *ngFor="let f of attachments();let i = index">
        <td *ngIf="!f.Deleted"
            style="position: relative">
          <a download="{{f.FileName}}"
             href="{{f.ServerRelativeUrl}}"
             *ngIf="f.ServerRelativeUrl && file.download">{{f.FileName}}</a>
          <a *ngIf="f.ServerRelativeUrl && !file.download"
             (click)="newTab(f, $event)"
             style="cursor:pointer">{{f.FileName}}</a>
          <a [hidden]="f.ServerRelativeUrl">{{f.FileName}}</a>

          <a style="color: red; padding-left: 8px;cursor: pointer;position: absolute;"
             (click)="delete(f, true)"
             title="Delete"
             [hidden]="disabled">x</a>
        </td>
        <td *ngIf="f.Deleted">
          <span style="color: red; text-decoration: line-through;">{{f.FileName}}</span>

          <a style="color: green; padding-left: 8px;cursor: pointer;"
             (click)="delete(f, false)"
             title="Undelete"
             [hidden]="disabled">+</a>
        </td>
        <td class="desktop">
          {{!f.ServerRelativeUrl ? 'Pending save' : ''}}
        </td>
      </tr>
    </table>

    <table class="files desktop"
           *ngIf="field != 'Attachments' && attachments().length > 0"
           cellspacing="0">
      <tr>
        <th *ngIf="file.check"></th>
        <th style="width: 0; white-space: nowrap;"
            *ngIf="file.doctype">
          <span style="cursor: pointer;"
                (click)="changeSort(file.doctype)">
            File Type
          </span>
          <select style="width:30px;border:none;margin-left:8px;"
                  [(ngModel)]="filter"
                  name="{{field}}_Filter">
            <option value>All</option>
            <option *ngFor="let v of usedTypes()"
                    value="{{v}}">{{v}}</option>
          </select>
          <span *ngIf="sort == '+'+file.doctype">&#9660;</span>
          <span *ngIf="sort == '-'+file.doctype">&#9650;</span>
        </th>
        <th>
          <span style="cursor: pointer;"
                (click)="changeSort('Title')">
            File Name
          </span>
          <span *ngIf="sort == '+Title'">&#9660;</span>
          <span *ngIf="sort == '-Title'">&#9650;</span>
        </th>
        <th *ngIf="file.notes">
          <span>
            {{friendlyName(file.notes)}}
          </span>
        </th>
        <th *ngFor="let k of additionalKeys(file.spec)">
          <span>
            {{file.spec?.[k]?.Title || friendlyName(file.spec?.[k]?.InternalName)}}
          </span>
        </th>
        <th style="width: 0; white-space: nowrap;">
          <span style="cursor: pointer;"
                (click)="changeSort('Created')">
            Date Uploaded
          </span>
          <span *ngIf="sort == '+Created'">&#9660;</span>
          <span *ngIf="sort == '-Created'">&#9650;</span>
        </th>
      </tr>
      <tr *ngFor="let f of attachments();let i = index">
        <td *ngIf="file.check">
          <input type="checkbox"
                 [disabled]="disabled || f.Deleted || (file.archive && f.ListItemAllFields[file.archive]) || f.ServerRelativeUrl?.length > 402"
                 [(ngModel)]="f.Checked"
                 name="{{field}}_Checked_{{i}}">
        </td>
        <td *ngIf="file.doctype"
            style="white-space: nowrap" [style]="width()">
          <app-choice [form]="f.ListItemAllFields"
                      [spec]="loadOrGenerateSpec(file.doctype, 'Choice')"
                      [field]="file.doctype"
                      [disabled]="disabled || f.Deleted || (file.archive && f.ListItemAllFields[file.archive]) || f.ServerRelativeUrl?.length > 402">
          </app-choice>
        </td>

        <td *ngIf="!f.Deleted && (!file.archive || !f.ListItemAllFields[file.archive])"
            style="position: relative">
          <a *ngIf="f.ServerRelativeUrl && file.download"
             download="{{f.FileName}}"
             href="{{f.ServerRelativeUrl}}">{{f.ListItemAllFields?.Title || f.FileName}}</a>
          <a *ngIf="f.ServerRelativeUrl && !file.download"
             (click)="newTab(f, $event)"
             style="cursor:pointer">{{f.ListItemAllFields?.Title || f.FileName}}</a>
          <input [disabled]="disabled"
                 [hidden]="f.ServerRelativeUrl"
                 [(ngModel)]="f.ListItemAllFields.Title"
                 style="width: calc( 100% - 16px );"
                 name="{{field}}_Name_{{i}}"
                 [title]="f.FileName + ' - ' + f.Length">

          <a style="color: red; padding-left: 8px;cursor: pointer;position: absolute;"
             (click)="delete(f, true)"
             title="Delete"
             [hidden]="disabled || f.ServerRelativeUrl?.length > 402">x</a>
        </td>
        <td *ngIf="!f.Deleted && file.archive && f.ListItemAllFields[file.archive]">
          <span style="text-decoration: line-through">{{f.ListItemAllFields?.Title || f.FileName}}</span>

          <a style="color: green; padding-left: 8px;cursor: pointer;"
             (click)="delete(f, false)"
             title="Undelete"
             [hidden]="disabled || f.ServerRelativeUrl?.length > 402">+</a>
          <a style="color: red; padding-left: 8px;cursor: pointer;"
             (click)="delete(f, true)"
             title="Delete"
             [hidden]="disabled || f.ServerRelativeUrl?.length > 402">x</a>
        </td>
        <td *ngIf="f.Deleted">
          <span style="color: red; text-decoration: line-through">{{f.ListItemAllFields?.Title || f.FileName}}</span>

          <a style="color: green; padding-left: 8px;cursor: pointer;"
             (click)="delete(f, false)"
             title="Undelete"
             [hidden]="disabled || f.ServerRelativeUrl?.length > 402">+</a>
        </td>

        <td *ngIf="file.notes">
          <app-choice [form]="f.ListItemAllFields"
                      [spec]="loadOrGenerateSpec(file.notes, 'Text')"
                      [field]="file.notes"
                      [disabled]="disabled || f.Deleted || (file.archive && f.ListItemAllFields[file.archive]) || f.ServerRelativeUrl?.length > 402">
          </app-choice>
        </td>
        <td *ngFor="let k of additionalKeys(file.spec)">
          <app-choice [form]="f.ListItemAllFields"
                      [spec]="file.spec ?? spec"
                      [field]="file.spec?.[k]?.InternalName"
                      [disabled]="disabled || f.Deleted || (file.archive && f.ListItemAllFields[file.archive]) || f.ServerRelativeUrl?.length > 402"
                      [text]="{
                        height: 35
                      }"
                      [override]='"{\"Title\":\"\"}"'>
          </app-choice>
        </td>

        <td>
          {{!f.ServerRelativeUrl ? 'Awaiting save' : f.TimeCreated | date:'dd MMM yyyy HH:mm'}}
        </td>
      </tr>
    </table>

    <div class="files mobile"
         *ngIf="field != 'Attachments' && !file.uploadonly && attachments().length > 0">
      <div *ngFor="let f of attachments();let i = index">
        <div *ngIf="!f.Deleted && (!file.archive || !f.ListItemAllFields[file.archive])"
             style="position: relative;">
          <input *ngIf="file.check"
                 type="checkbox"
                 [disabled]="disabled || f.Deleted || (file.archive && f.ListItemAllFields[file.archive]) || f.ServerRelativeUrl?.length > 402"
                 [(ngModel)]="f.Checked"
                 name="{{field}}_CheckM_{{i}}">

          <a *ngIf="f.ServerRelativeUrl && file.download"
             download="{{f.FileName}}"
             href="{{f.ServerRelativeUrl}}">{{f.ListItemAllFields?.Title || f.FileName}}</a>
          <a *ngIf="f.ServerRelativeUrl && !file.download"
             (click)="newTab(f, $event)"
             style="cursor:pointer">{{f.ListItemAllFields?.Title || f.FileName}}</a>
          <input [disabled]="disabled"
                 [hidden]="f.ServerRelativeUrl"
                 [(ngModel)]="f.ListItemAllFields.Title"
                 style="width: calc( 100% - 38px );"
                 name="{{field}}_NameM_{{i}}"
                 [title]="f.FileName + ' - ' + f.Length">

          <a style="color: red; padding-left: 8px;cursor: pointer;position: absolute;"
             (click)="delete(f, true)"
             title="Delete"
             [hidden]="disabled || f.ServerRelativeUrl?.length > 402">x</a>
        </div>
        <div *ngIf="!f.Deleted && file.archive && f.ListItemAllFields[file.archive]">
          <span style="text-decoration: line-through">{{f.ListItemAllFields?.Title || f.FileName}}</span>

          <a style="color: green; padding-left: 8px;cursor: pointer;"
             (click)="delete(f, false)"
             title="Undelete"
             [hidden]="disabled || f.ServerRelativeUrl?.length > 402">+</a>
          <a style="color: red; padding-left: 8px;cursor: pointer;"
             (click)="delete(f, true)"
             title="Delete"
             [hidden]="disabled || f.ServerRelativeUrl?.length > 402">x</a>
        </div>
        <div *ngIf="f.Deleted">
          <span style="color: red; text-decoration: line-through">{{f.ListItemAllFields?.Title || f.FileName}}</span>

          <a style="color: green; padding-left: 8px;cursor: pointer;"
             (click)="delete(f, false)"
             title="Undelete"
             [hidden]="disabled || f.ServerRelativeUrl?.length > 402">+</a>
        </div>
        <div class="choice"
             *ngIf="!f.Deleted && (!file.archive || !f.ListItemAllFields[file.archive]) && file.doctype">
          <span *ngIf="file.spec">{{friendlyName(file.doctype)}}</span>

          <app-choice [form]="f.ListItemAllFields"
                      [spec]="loadOrGenerateSpec(file.doctype, 'Choice')"
                      [field]="file.doctype"
                      [disabled]="disabled || f.Deleted || (file.archive && f.ListItemAllFields[file.archive]) || f.ServerRelativeUrl?.length > 402">
          </app-choice>
        </div>
        <div class="choice"
             *ngIf="!f.Deleted && (!file.archive || !f.ListItemAllFields[file.archive]) && file.notes">
          <span *ngIf="file.spec">{{friendlyName(file.notes)}}</span>

          <app-choice [form]="f.ListItemAllFields"
                      [spec]="loadOrGenerateSpec(file.notes, 'Text')"
                      [field]="file.notes"
                      [disabled]="disabled || f.Deleted || (file.archive && f.ListItemAllFields[file.archive]) || f.ServerRelativeUrl?.length > 402">
          </app-choice>
        </div>
        <div *ngFor="let k of additionalKeys(file.spec)">
          <app-choice [form]="f.ListItemAllFields"
                      [spec]="file.spec ?? spec"
                      [field]="file.spec?.[k]?.InternalName"
                      [disabled]="disabled || f.Deleted || (file.archive && f.ListItemAllFields[file.archive]) || f.ServerRelativeUrl?.length > 402"
                      [text]="{
                        height: 75
                      }">
          </app-choice>
        </div>
        <div>
          {{!f.ServerRelativeUrl ? 'Awaiting save' : f.TimeCreated | date:'dd MMM yyyy HH:mm'}}
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="get('TypeAsString') == 'Attachments' && !disabled"
       style="text-align: center; padding: 4px;"
       (dragover)="over($event)"
       (dragleave)="leave($event)"
       (drop)="drop($event)"
       [ngClass]="{'FilesOver': filesOver}">
    <b style="font-size: 48px;">&#8613;</b><br>
    Drag and drop additional files here<br>
    or<br>

    <button (click)="importOutlook()"
            [disabled]="office.loading"
            *ngIf="office.type == 'Outlook'">Import selected email(s)</button>
    <button (click)="importOffice()"
            [disabled]="office.loading"
            *ngIf="office.type && office.type != 'Outlook'">Import open file</button>

    <input accept="{{file.accept}}"
           type="file"
           style="display: none !important;"
           multiple
           (change)="add($event.target)"
           name="{{field}}_F" />
    <button onclick="this.previousElementSibling.click()">Browse file</button>
  </div>

  <div *ngIf="['User','UserMulti'].indexOf(get('TypeAsString')) >= 0">
    <div *ngIf="form[field + 'Id'] && form[field + 'Id'].results">
      <span *ngFor="let user of form[field + 'Id'].results"
            style="padding: 8px;">{{displayUser(user)}} <a (click)="removeUser(user)"
           style="color: red;"
           [hidden]="disabled">X</a></span>
    </div>
    <div *ngIf="form[field + 'Id'] && !form[field + 'Id'].results">
      <span style="padding: 8px;">{{displayUser(form[field + 'Id'])}} <a (click)="removeUser(null)"
           style="color: red;"
           [hidden]="disabled">X</a></span>
    </div>
    <input type="text"
           [(ngModel)]="name"
           name="{{field}}_N"
           (keyup)="onUpUser($event.key)"
           (click)="onUpUser(undefined)"
           [hidden]="disabled || (get('TypeAsString') == 'User' && form[field + 'Id'])"
           placeholder="{{(get('Title') != '' ? get('Title') : null) ?? friendlyName(get('InternalName'))}}...">

    <div style="position: relative; padding: 0;"
         [hidden]="disabled">
      <div class="AutoComplete"
           *ngIf="users.length > 0">
        <ul>
          <li *ngFor="let user of users; let i = index"
              (click)="selectedUser(user)"
              [style]="(pos == i ? 'background-color: rgba(0, 0, 0, 0.04);' : '')">
            {{user.DisplayText}}
          </li>
        </ul>
        <ul>
          <li style="text-align: right;"
              (click)="selectedUser(null)">
            Cancel
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div *ngIf="!get('TypeAsString')"
       style="position:relative;">
    <div class="spin"></div>
  </div>

  <div *ngIf="['Lookup','LookupMulti','TaxonomyFieldType','TaxonomyFieldTypeMulti','AllDayEvent','Calculated','Computed','ContentTypeId','Counter','CrossProjectLink','Currency','File','GridChoice','Guid','ModStat','MultiColumn','PageSeparator','Recurrence','ThreadIndex','Threading','WorkflowEventType','WorkflowStatus','FieldLocation'].indexOf(get('TypeAsString')) >= 0">
    {{form[field] && form[field].results ? form[field].results.join(', ') : form[field]}}
    <div style="opacity:0.85">Error,{{required() ? ' required' : ''}} field type '{{get('TypeAsString')}}' not yet editable...</div>
  </div>

  <input style="display:none !important;"
         type="text"
         [required]="required()"
         [value]="validator()"
         name="{{field}}_Validator">

  @if (versions && versions.length > 1) {
  <ul class="versions"
      [hidden]="!versionsDisplayed">
    <li><b>Field version history:</b></li>
    @for (v of versions; track $index; let i = $index) {
    @if (i == 0) {
    <li class="current">
      {{v[field] ?? 'blank'}} - {{v['Created'] | date:'dd MMM yyyy HH:mm:ss'}} {{v['Editor']['LookupValue']}}
    </li>
    } @else if (v[field] != versions[i-1][field] && (v[field] || v[field]?.toString().length > 0)) {
    <li>
      {{v[field]}} - {{v['Created'] | date:'dd MMM yyyy HH:mm:ss'}} {{v['Editor']['LookupValue']}} {{versionsToggle()}}
    </li>
    }
    }
  </ul>
  }

</div>
